/* A simple program that recognizes the characters 't' and 'v' */
#include <stdio.h>
#include <string.h>

int main () {
	FILE* fp;
	char dataIn[] = 0;
	//Open file for reading and writing
	fp = fopen ("/dev/jtag_uart", "r+");
	if (fp)	{
		// Loop until KILL command
		while (dataIn != "KILL") {
			dataIn = fgets(fp, 50); // Get string from UART
			if (ferror(fp)) {// Check if an error occurred with the file
				clearerr(fp);// If so, clear it.
			}
		}
		fprintf(fp, "Closing the JTAG UART file handle.\n");
		fclose (fp);
	}
	return 0;
}
