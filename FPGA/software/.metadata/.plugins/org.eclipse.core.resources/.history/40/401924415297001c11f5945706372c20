/* A simple program that recognizes the characters 't' and 'v' */
#include <stdio.h>
#include <string.h>

int main () {
	FILE* fp;
	char prompt = 0;
	//Open file for reading and writing
	fp = fopen ("/dev/jtag_uart", "r+");
	if (fp)	{
		// Loop until KILL command
		while (prompt != "KILL") {
			prompt = fgets(fp, 50); // Get string from UART
			if (prompt == 't') { // Print a message if character is 't'.
				fwrite (msg, strlen (msg), 1, fp);
				alt_printf("Got t\n");
			}
			if (ferror(fp)) {// Check if an error occurred with the file
				clearerr(fp);// If so, clear it.
			}
		}
		fprintf(fp, "Closing the JTAG UART file handle.\n");
		fclose (fp);
	}
	return 0;
}
