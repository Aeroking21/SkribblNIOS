//NIOS Imports
#include "system.h"
#include "altera_up_avalon_accelerometer_spi.h"
#include "altera_avalon_pio_regs.h"
#include "sys/alt_irq.h"

//Standard Imports
#include <stdlib.h>
#include <stdio.h>
#include <string.h>

//Threading Import
#include <pthread.h>

//Time Import
#include "sys/alt_timestamp.h"
#define SAMPLING_TIME 1
#define INTERVALSECOND 100000000

alt_u8 led;
int level;

void led_write(alt_u8 led_pattern) {
    IOWR(LED_BASE, 0, led_pattern);
}

int main () {
	FILE* fp;
	char dataIn[] = 0;
	//Open file for reading and writing
	fp = fopen ("/dev/jtag_uart", "r+");
	if (fp)	{
		// Loop until KILL command
		while (dataIn != "KILL") {
			dataIn = fgets(fp, 50); // Get string from UART
			if (dataIn == 't') { // Print a message if character is 't'.
				fwrite (msg, strlen (msg), 1, fp);
				alt_printf("Got t\n");
			}







			if (ferror(fp)) {// Check if an error occurred with the file
				clearerr(fp);// If so, clear it.
			}
		}
		fclose (fp);
	}
	return 0;
}
